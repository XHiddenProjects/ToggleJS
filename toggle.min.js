class ToggleJS{constructor(t,s){if(this.el="string"==typeof t?document.querySelector(t):t,!this.el)throw new Error("No element selected");this.el.style="user-select: none;-ms-user-select: none;-moz-user-select: none;-ms-touch-select: none;-webkit-user-select: none;";const e={width:"60px",height:"30px",backgroundColor:"#ccc",borderRadius:"15px",position:"relative",cursor:"pointer",transition:"background-color 0.3s"},i={width:"28px",height:"28px",backgroundColor:"#fff",borderRadius:"50%",position:"absolute",top:"1px",left:"1px",transition:"left 0.3s"};this.options=Object.assign({states:[0,1],statesLabel:null,disabled:!1,current:0,styles:{track:{default:{width:"60px",height:"30px",backgroundColor:"#ccc",borderRadius:"15px",position:"relative",cursor:"pointer",transition:"background-color 0.3s"},0:{width:"60px",height:"30px",backgroundColor:"#ccc",borderRadius:"15px",position:"relative",cursor:"pointer",transition:"background-color 0.3s"},1:{width:"60px",height:"30px",backgroundColor:"#4CAF50",borderRadius:"15px",position:"relative",cursor:"pointer",transition:"background-color 0.3s"}},thumb:{default:{width:"28px",height:"28px",backgroundColor:"#fff",borderRadius:"50%",position:"absolute",top:"1px",left:"1px",transition:"left 0.3s"},0:{width:"28px",height:"28px",backgroundColor:"#fff",borderRadius:"50%",position:"absolute",top:"1px",left:"1px",transition:"left 0.3s"},1:{width:"28px",height:"28px",backgroundColor:"#fff",borderRadius:"50%",position:"absolute",top:"1px",left:"31px",transition:"left 0.3s"}}},onToggle:null,onInit:null},s),this.options.styles.track||(this.options.styles.track={}),this.options.styles.thumb||(this.options.styles.thumb={});for(let t=0;t<this.options.states.length;t++)this.options.styles.track[t]?(this.options.styles.track[t].position||(this.options.styles.track[t].position="relative"),this.options.styles.track[t].transition||(this.options.styles.track[t].transition="background-color 0.3s"),this.options.styles.track[t].width||(this.options.styles.track[t].width="60px"),this.options.styles.track[t].height||(this.options.styles.track[t].height="30px"),this.options.styles.track[t].borderRadius||(this.options.styles.track[t].borderRadius="15px")):this.options.styles.track[t]=e,this.options.styles.thumb[t]?(this.options.styles.thumb[t].position||(this.options.styles.thumb[t].position="absolute"),this.options.styles.thumb[t].top||(this.options.styles.thumb[t].top="1px"),this.options.styles.thumb[t].left||(this.options.styles.thumb[t].left="0px"),this.options.styles.thumb[t].transition||(this.options.styles.thumb[t].transition="left 0.3s"),this.options.styles.thumb[t].width||(this.options.styles.thumb[t].width="28px"),this.options.styles.thumb[t].height||(this.options.styles.thumb[t].height="28px"),this.options.styles.thumb[t].borderRadius||(this.options.styles.thumb[t].borderRadius="50%")):this.options.styles.thumb[t]=i;this.stateIndex=this.options.current,this.isDisabled=this.options.disabled,this._init()}_fixStyle(t){return Object.entries(t).map((([t,s])=>`${t.replace(/([A-Z])/g,"-$1").toLowerCase()}:${s}`)).join(";")}_applyStateStyles(){const t=this.options.styles.track&&this.options.styles.track[this.stateIndex]||this.options.styles.track.default||{},s=this.options.styles.thumb&&this.options.styles.thumb[this.stateIndex]||this.options.styles.thumb.default||{};this.track.style.cssText=this._fixStyle(t),this.thumb.style.cssText=this._fixStyle(s);const e=parseFloat(s.width||"28"),i=parseFloat(s.height||"28");this.labelInside.style.fontSize=1.5*Math.floor(e/i)+"vh",this._updateLabel()}_init(){this.track=document.createElement("div"),this.thumb=document.createElement("div"),this.thumb.style.display="flex",this.thumb.style.alignItems="center",this.thumb.style.justifyContent="center",this.thumb.style.overflow="hidden",this.labelInside=document.createElement("span"),this.labelInside.style.position="absolute",this.labelInside.style.top="50%",this.labelInside.style.left="50%",this.labelInside.style.transform="translate(-50%, -50%)";const t=parseFloat(this.options.styles.thumb[this.stateIndex]?.width||"28")/parseFloat(this.options.styles.thumb[this.stateIndex]?.height||"28")*1.5;this.labelInside.style.fontSize=`${t}vh`,this.labelInside.style.pointerEvents="none",this.thumb.appendChild(this.labelInside),this.track.appendChild(this.thumb),this.el.appendChild(this.track),this._applyStateStyles(),this.options.statesLabel&&(this.label=document.createElement("span"),this.label.style.marginLeft="10px",this._updateLabel(),this.el.appendChild(this.label)),this._updateUI(),this.track.addEventListener("click",(t=>{if(this.isDisabled)return;const s=this.thumb.getBoundingClientRect(),e=t.clientX;e>s.right?this.stateIndex<this.options.states.length-1&&(this.setState(this.stateIndex+1),"function"==typeof this.options.onToggle&&this.options.onToggle({value:this.getValue(),label:this.options.statesLabel?this.options.statesLabel[this.stateIndex]:this.options.states[this.stateIndex],disabled:this.options.disabled})):e<s.left?this.stateIndex>0&&(this.setState(this.stateIndex-1),"function"==typeof this.options.onToggle&&this.options.onToggle({value:this.getValue(),label:this.options.statesLabel?this.options.statesLabel[this.stateIndex]:this.options.states[this.stateIndex],disabled:this.options.disabled})):this._toggleState()})),this.options.disabled?(this.track.style.opacity=.65,this.thumb.style.opacity=.86,this.track.style.cursor="not-allowed"):this.track.style.cursor="pointer","function"==typeof this.options.onInit&&this.options.onInit({value:this.getValue(),label:this.options.statesLabel?this.options.statesLabel[this.stateIndex]:this.options.states[this.stateIndex],disabled:this.options.disabled})}_updateLabel(){this.options.statesLabel&&this.labelInside?this.labelInside.textContent=this.options.statesLabel[this.stateIndex]:this.labelInside.textContent=""}_updateUI(){this._applyStateStyles();const t=this.stateIndex/(this.options.states.length-1),s=this.options.styles.thumb[this.stateIndex]||{},e=parseFloat(s.width||"28"),i=this.options.styles.track[this.stateIndex]||{},o=t*(parseFloat(i.width||"60")-e);this.thumb.style.left=`${o}px`,this._updateLabel()}_toggleState(){this.stateIndex=(this.stateIndex+1)%this.options.states.length,this._updateUI(),"function"==typeof this.options.onToggle&&this.options.onToggle({value:this.getValue(),label:this.options.statesLabel?this.options.statesLabel[this.stateIndex]:this.options.states[this.stateIndex],disabled:this.options.disabled})}getValue(){return this.options.states[this.stateIndex]}setState(t){t>=0&&t<this.options.states.length&&(this.stateIndex=t,this._updateUI())}setDisabled(t){this.isDisabled=t,this.track.style.cursor=t?"not-allowed":"pointer"}}
